socket.emit('viewCount')
var xValues = [];
socket.once('viewCounted', function (data) {
    $('.text-lg').text(data.counter)
    for (let i = 0; i < data.counters.length + 1; i++) {
        xValues.push(i)
    }
    data.counters.push(data.counter)
    var viewsChart = new Chart("viewsChart", {
        type: "line",
        data: {
            labels: xValues,
            datasets: [{
                pointBackgroundColor: "rgba(0,0,255,1)",
                data: data.counters
              }]
        },
        options: {
            legend: {
                display: false,
            },
                title: {
                    display: true,
                    text: 'View Count per Day'
                }
            
        }
      });
})
socket.emit('surveys')
var id;
socket.on('surveyOne', function (dbdata) {
    if (dbdata) {
        id = dbdata._id;
        $('#survey').empty().append('<div id="surveys"><table><tbody><tr>  <td class="table-header" colspan="5">PERSONAL INFORMATION</td></tr><tr>  <td rowspan="2">1. Name</td>  <td colspan="4">'+dbdata.name+'</td></tr><tr>  <td>(Last Name)<br></td><td>(First Name)</td><td>(Middle Name)</td><td>Maiden Name<br>(for Married Women)</td></tr><tr>    <td>2. Date of Birth (dd/mm/yyyy)</td>     <td>'+dbdata.dateOfBirth+'</td>     <td rowspan="3">9. Present Address<br>10. Zip Code</td>   <td colspan="2" rowspan="2">'+dbdata.presentAddress+'</td><tr>   <td>3. Place of Birth</td>   <td>'+dbdata.placeOfBirth+'</td> </tr> <tr>   <td>4. Sex</td>   <td>'+dbdata.sex+'   </td>   <td colspan="2">'+dbdata.presentZipcode+'</td> </tr> <tr>   <td rowspan="3">5. Civil Status</td>   <td rowspan="3">     '+dbdata.civilStatus+'   </td>   <td rowspan="3">9. Permanent Address<br>10. Zip Code</td>   <td colspan="2" rowspan="2">'+dbdata.permanentAddress+'</td></td> </tr> <tr> </tr> <tr>   <td colspan="2">'+dbdata.permanentZipcode+'</td> </tr> <tr>   <td>6. Citizenship</td>   <td>'+dbdata.citizenShip+'</td>   <td>11. Name of School Last Attended</td>   <td colspan="2">'+dbdata.nameOfSchoolLastAttended+'</td> </tr> <tr>   <td>7. Mobile Number</td>   <td>'+dbdata.mobileNumber+'</td>   <td rowspan="2">12. School Address</td>   <td colspan="2" rowspan="2">'+dbdata.schoolAddress+'</td> </tr> <tr>   <td>8. E-mail Address</td>   <td>'+dbdata.email+'</td> </tr> <tr>   <td>13. School Sector:</td>   <td>'+dbdata.schoolSector+'</td>   <td>15. Type of Disability (if applicable)</td>   <td colspan="2">'+dbdata.typeOfDisability+'</td> </tr> <tr>   <td>14. Highest Attained Grade/Year Level</td>   <td>'+dbdata.highestAttainedGradeYearLevel+'</td>   <td>16. IP affiliation (if applicable)</td>   <td colspan="2">'+dbdata.ipAffiliation+'</td> </tr> <tr>   <td colspan="5"></td> </tr> <tr>   <td colspan="5" class="table-header">FAMILY BACKGROUND</td> </tr> <tr>   <td>     Father: '+dbdata.statusFather+'   </td>   <td>Mother:'+dbdata.statusMother+'</td></td><td><td colspan="2" style="text-align: center;">Legal Guardian</td> </tr> <tr>   <td>17. Name</td>   <td>'+dbdata.nameFather+'</td>   <td>'+dbdata.nameMother+'</td>   <td colspan="2">'+dbdata.nameGuardian+'</td> </tr> <tr>   <td>18. Address</td>   <td>'+dbdata.addressFather+'</td>   <td>'+dbdata.addressMother+'</td>   <td colspan="2">'+dbdata.addressGuardian+'</td> </tr> <tr><td>19. Contact Number</td><td>'+dbdata.contactNumberFather+'</td><td>'+dbdata.contactNumberMother+'</td><td colspan="2">'+dbdata.contactNumberGuardian+'</td> </tr><tr>   <td>20. Occupation</td>   <td>'+dbdata.occupationFather+'</td>   <td>'+dbdata.occupationMother+'</td>  <td colspan="2">'+dbdata.occupationGuardian+'<td></tr><tr><td>21. Name of Employer</td>  <td>'+dbdata.nameOfEmployerFather+'<td>  <td>'+dbdata.nameOfEmployerMother+'<td>  <td colspan="2">'+dbdata.nameOfEmployerGuardian+'<td> </tr> <tr>   <td>22. Employer Address</td>  <td>'+dbdata.employerAddressFather+'<td> <td>'+dbdata.employerAddressMother+'<td> <td colspan="2">'+dbdata.employerAddressGuardian+'<td></tr><tr><td>23. Highest Educational Attainment</td><td>'+dbdata.highestEducationalAttainmentFather+'<td><td>'+dbdata.highestEducationalAttainmentMother+'<td><td colspan="2">'+dbdata.highestEducationalAttainmentGuardian+'<td></tr><tr>  <td>24. Total Parents Taxable Income</td> <td>'+dbdata.totalParentsTaxableIncomeFather+'<td> <td>'+dbdata.totalParentsTaxableIncomeMother+'<td> <td colspan="2">'+dbdata.totalParentsTaxableIncomeGuardian+'<td></tr><tr> <td colspan="5">25. Is your family a beneficiary of the DSWD\'s pantawid Pamilyang Pilipino Program (4Ps)? </td></tr><tr> <td colspan="5">'+dbdata.dsdw+'</td></tr><tr> <td colspan="1">26. School Intended to enroll or enrolled in:<br>27. School Address<br> 28. Type of School:<br> 29. Degree Program<br>30. Are you enjoying other sources of educational/financial assistance? </td> <td colspan="4">'+dbdata.schoolEnroll+' <br> '+dbdata.schoolAddress0+' <br>'+dbdata.typeOfSchool+' <br> '+dbdata.degreeProgram+' <br> '+dbdata.enjoying+'</td></tr><tr><td colspan="5">I hereby certify that foregoing statements are true and correct. Any misinformation or witholding of information will automatically disqualify me from the CHED Scholarship Program. I am willing to refund the financial benefits received if such information is discovered after acceptance of the award. <br> <br> I hereby express my consent for the Commission on Higher Education to collect, record, organize, update or modify, retrieve, consult, use, consolidate, block, erase or destruct my personal data as part of my information. I hereby affirm my right to be informed, object to processing, access and rectify, suspend or withdraw my personal data and be indemnified in case of damages pursuant to the provisions of the Republic Act No. 10173 of the Philippines, Data Privacy Act of 2012 and its corresponding Implementing Rules and Regulations.</td></tr><tr><td colspan="1">(Signature over Printed Name of Applicant)</td>   <td colspan="4">'+dbdata.signature+'<td> </tr><tr>  <td colspan="1">Date Accomplished</td>  <td colspan="4">'+dbdata.dateAccomplished+'<td></tr></tbody></table><button onclick="approve()">Approve</button><button onclick="disapprove()">Disapprove</button></div>')
    }
})
function approve() {
    socket.emit('approve', id)
}
function disapprove() {
    socket.emit('disapprove', id)
}
socket.on('surveyApprove', function (data) {
    $('#approved').empty()
    if (data) {
        data.forEach(dbdata => {
            $('#approved').append('<div id="surveys"><table><tbody><tr>  <td class="table-header" colspan="5">PERSONAL INFORMATION</td></tr><tr>  <td rowspan="2">1. Name</td>  <td colspan="4">'+dbdata.name+'</td></tr><tr>  <td>(Last Name)<br></td><td>(First Name)</td><td>(Middle Name)</td><td>Maiden Name<br>(for Married Women)</td></tr><tr>    <td>2. Date of Birth (dd/mm/yyyy)</td>     <td>'+dbdata.dateOfBirth+'</td>     <td rowspan="3">9. Present Address<br>10. Zip Code</td>   <td colspan="2" rowspan="2">'+dbdata.presentAddress+'</td><tr>   <td>3. Place of Birth</td>   <td>'+dbdata.placeOfBirth+'</td> </tr> <tr>   <td>4. Sex</td>   <td>'+dbdata.sex+'   </td>   <td colspan="2">'+dbdata.presentZipcode+'</td> </tr> <tr>   <td rowspan="3">5. Civil Status</td>   <td rowspan="3">     '+dbdata.civilStatus+'   </td>   <td rowspan="3">9. Permanent Address<br>10. Zip Code</td>   <td colspan="2" rowspan="2">'+dbdata.permanentAddress+'</td></td> </tr> <tr> </tr> <tr>   <td colspan="2">'+dbdata.permanentZipcode+'</td> </tr> <tr>   <td>6. Citizenship</td>   <td>'+dbdata.citizenShip+'</td>   <td>11. Name of School Last Attended</td>   <td colspan="2">'+dbdata.nameOfSchoolLastAttended+'</td> </tr> <tr>   <td>7. Mobile Number</td>   <td>'+dbdata.mobileNumber+'</td>   <td rowspan="2">12. School Address</td>   <td colspan="2" rowspan="2">'+dbdata.schoolAddress+'</td> </tr> <tr>   <td>8. E-mail Address</td>   <td>'+dbdata.email+'</td> </tr> <tr>   <td>13. School Sector:</td>   <td>'+dbdata.schoolSector+'</td>   <td>15. Type of Disability (if applicable)</td>   <td colspan="2">'+dbdata.typeOfDisability+'</td> </tr> <tr>   <td>14. Highest Attained Grade/Year Level</td>   <td>'+dbdata.highestAttainedGradeYearLevel+'</td>   <td>16. IP affiliation (if applicable)</td>   <td colspan="2">'+dbdata.ipAffiliation+'</td> </tr> <tr>   <td colspan="5"></td> </tr> <tr>   <td colspan="5" class="table-header">FAMILY BACKGROUND</td> </tr> <tr>   <td>     Father: '+dbdata.statusFather+'   </td>   <td>Mother:'+dbdata.statusMother+'</td></td><td><td colspan="2" style="text-align: center;">Legal Guardian</td> </tr> <tr>   <td>17. Name</td>   <td>'+dbdata.nameFather+'</td>   <td>'+dbdata.nameMother+'</td>   <td colspan="2">'+dbdata.nameGuardian+'</td> </tr> <tr>   <td>18. Address</td>   <td>'+dbdata.addressFather+'</td>   <td>'+dbdata.addressMother+'</td>   <td colspan="2">'+dbdata.addressGuardian+'</td> </tr> <tr><td>19. Contact Number</td><td>'+dbdata.contactNumberFather+'</td><td>'+dbdata.contactNumberMother+'</td><td colspan="2">'+dbdata.contactNumberGuardian+'</td> </tr><tr>   <td>20. Occupation</td>   <td>'+dbdata.occupationFather+'</td>   <td>'+dbdata.occupationMother+'</td>  <td colspan="2">'+dbdata.occupationGuardian+'<td></tr><tr><td>21. Name of Employer</td>  <td>'+dbdata.nameOfEmployerFather+'<td>  <td>'+dbdata.nameOfEmployerMother+'<td>  <td colspan="2">'+dbdata.nameOfEmployerGuardian+'<td> </tr> <tr>   <td>22. Employer Address</td>  <td>'+dbdata.employerAddressFather+'<td> <td>'+dbdata.employerAddressMother+'<td> <td colspan="2">'+dbdata.employerAddressGuardian+'<td></tr><tr><td>23. Highest Educational Attainment</td><td>'+dbdata.highestEducationalAttainmentFather+'<td><td>'+dbdata.highestEducationalAttainmentMother+'<td><td colspan="2">'+dbdata.highestEducationalAttainmentGuardian+'<td></tr><tr>  <td>24. Total Parents Taxable Income</td> <td>'+dbdata.totalParentsTaxableIncomeFather+'<td> <td>'+dbdata.totalParentsTaxableIncomeMother+'<td> <td colspan="2">'+dbdata.totalParentsTaxableIncomeGuardian+'<td></tr><tr> <td colspan="5">25. Is your family a beneficiary of the DSWD\'s pantawid Pamilyang Pilipino Program (4Ps)? </td></tr><tr> <td colspan="5">'+dbdata.dsdw+'</td></tr><tr> <td colspan="1">26. School Intended to enroll or enrolled in:<br>27. School Address<br> 28. Type of School:<br> 29. Degree Program<br>30. Are you enjoying other sources of educational/financial assistance? </td> <td colspan="4">'+dbdata.schoolEnroll+' <br> '+dbdata.schoolAddress0+' <br>'+dbdata.typeOfSchool+' <br> '+dbdata.degreeProgram+' <br> '+dbdata.enjoying+'</td></tr><tr><td colspan="5">I hereby certify that foregoing statements are true and correct. Any misinformation or witholding of information will automatically disqualify me from the CHED Scholarship Program. I am willing to refund the financial benefits received if such information is discovered after acceptance of the award. <br> <br> I hereby express my consent for the Commission on Higher Education to collect, record, organize, update or modify, retrieve, consult, use, consolidate, block, erase or destruct my personal data as part of my information. I hereby affirm my right to be informed, object to processing, access and rectify, suspend or withdraw my personal data and be indemnified in case of damages pursuant to the provisions of the Republic Act No. 10173 of the Philippines, Data Privacy Act of 2012 and its corresponding Implementing Rules and Regulations.</td></tr><tr><td colspan="1">(Signature over Printed Name of Applicant)</td>   <td colspan="4">'+dbdata.signature+'<td> </tr><tr>  <td colspan="1">Date Accomplished</td>  <td colspan="4">'+dbdata.dateAccomplished+'<td></tr></tbody></table></div>')
        });
    }
})
socket.on('feedback', function (data) {
    $('#feedback').empty()
    data.forEach(dbdata => {
        $('#feedback').append('<p>'+dbdata.sender+ ': '+dbdata.message+'</p>')
        socket.emit('feedbackRead',dbdata._id)
    })
})